<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>Store Manager — Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap core -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <link href="../assets/css/app-ui.css" rel="stylesheet" />
  <link href="dashboard_store.css" rel="stylesheet" />
</head>
<body class="bg-light">

  <div class="store-layout">
    <!-- SIDEBAR -->
    <aside class="store-sidebar">
      <div class="sidebar-header d-flex align-items-center mb-3">
        <div class="avatar-circle me-2">
          <i class="bi bi-shop-window"></i>
        </div>
        <div>
          <div class="fw-semibold small">Store Manager</div>
          <div class="text-muted extra-small" id="sm-username">sm1</div>
        </div>
      </div>

      <nav class="nav flex-column mb-4" id="module-nav">
        <button class="nav-link active d-flex align-items-center gap-2" data-module="sales">
          <i class="bi bi-cash-register"></i>
          <span>Bán hàng</span>
        </button>
        <button class="nav-link d-flex align-items-center gap-2" data-module="products">
          <i class="bi bi-box-seam"></i>
          <span>Quản lý sản phẩm</span>
        </button>
        <button class="nav-link d-flex align-items-center gap-2" data-module="import">
          <i class="bi bi-box-arrow-in-down"></i>
          <span>Nhập kho</span>
        </button>
        <button class="nav-link d-flex align-items-center gap-2" data-module="report">
          <i class="bi bi-graph-up-arrow"></i>
          <span>Báo cáo</span>
        </button>
      </nav>

      <div class="sidebar-footer small text-muted">
        Đang đăng nhập với vai trò<br />
        <strong>Store Manager</strong>.
      </div>
    </aside>

    <!-- MAIN AREA — ONLY MODULE -->
    <main class="store-main">

      <!-- MODULE CONTAINER -->
      <section class="module-wrapper">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <div>
            <h2 class="h6 mb-0" id="module-title">Bán hàng</h2>
            <p class="small text-muted mb-0" id="module-desc">
              Giao diện Bán hàng gốc từ <code>sales.html</code>, được mở bên trong dashboard.
            </p>
          </div>
        </div>

        <div class="module-frame-wrapper">
          <iframe
            id="module-frame"
            title="Store module"
            src="../sales.html"
            frameborder="0"
            loading="lazy"
          ></iframe>
        </div>

        <p class="small text-muted mt-2">
          Các chức năng sử dụng giao diện gốc:
          <code>sales.html</code>, <code>store-goods.html</code>,
          <code>transfer/transfer.html</code>, <code>home.html</code> (phần Báo cáo).
        </p>
      </section>

    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Map module -> URL + text
    const MODULES = {
      sales: {
        url: "../sales.html",
        title: "Bán hàng",
        desc: "Giao diện Bán hàng gốc từ sales.html."
      },
      products: {
        url: "../store-goods.html",
        title: "Quản lý sản phẩm",
        desc: "Mở màn hình Store — Stock & Prices (store-goods.html)."
      },
      import: {
        url: "../transfer/transfer.html",
        title: "Nhập kho",
        desc: "Mở màn hình tạo phiếu nhập hàng (transfer/transfer.html)."
      },
      report: {
        url: "../home.html",
        title: "Báo cáo",
        desc: "Dùng khu vực Báo cáo trong home.html (ấn nút Mở báo cáo)."
      }
    };

    function setActiveModule(key) {
      const mod = MODULES[key];
      if (!mod) return;

      document.getElementById("module-frame").src = mod.url;
      document.getElementById("module-title").textContent = mod.title;
      document.getElementById("module-desc").textContent = mod.desc;

      document.querySelectorAll("#module-nav .nav-link").forEach(btn => {
        btn.classList.toggle("active", btn.dataset.module === key);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll("[data-module]").forEach(btn => {
        btn.addEventListener("click", () => {
          setActiveModule(btn.dataset.module);
        });
      });

      // Load info user từ local/session storage (nếu có)
      try {
        const raw = localStorage.getItem("user") || sessionStorage.getItem("user");
        if (raw) {
          const u = JSON.parse(raw);
          if (u.userName) document.getElementById("sm-username").textContent = u.userName;
        }
      } catch {}

      setActiveModule("sales");
    });
  </script>

</body>
</html>
